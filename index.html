<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kelime Uygulamasƒ± - C13 G√ºncel</title>
    <style>
        /* --- TEMEL AYARLAR --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body { 
            margin: 0; padding: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background-color: #2c3e50; 
            color: white; 
            width: 100%;
            height: 100vh; 
            height: 100dvh; 
            overflow: hidden; 
        }

        .app-container { 
            width: 100%; 
            max-width: 600px; 
            margin: 0 auto; 
            background-color: #4a6a7a; 
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        /* --- BA≈ûLIK VE SEKMELER --- */
        .fixed-header-group {
            flex-shrink: 0; 
            background-color: #354f5c;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            z-index: 10;
        }

        header.home-header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 20px; 
            height: 60px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .app-title { font-size: 18px; font-weight: bold; }
        .profile-pic { width: 36px; height: 36px; background-color: #f3d290; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 20px; }
        
        .tabs { 
            display: flex; 
            overflow-x: auto; 
            white-space: nowrap; 
            padding: 0; 
            height: 50px; 
            align-items: center;
            scrollbar-width: none; 
        }
        .tabs::-webkit-scrollbar { display: none; }
        
        .tab { 
            padding: 0 20px; 
            height: 100%;
            display: flex; align-items: center;
            color: #bdc3c7; 
            font-weight: bold; font-size: 14px; 
            position: relative; cursor: pointer;
            flex-shrink: 0;
            transition: color 0.3s;
        }
        .tab.active { color: #f1c40f; background-color: rgba(255,255,255,0.05); }
        .tab.active::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background-color: #f1c40f; }

        /* --- ƒ∞√áERƒ∞K ALANI --- */
        .content-area { 
            flex-grow: 1;
            overflow-y: auto; 
            padding: 15px;
            padding-bottom: 80px;
            -webkit-overflow-scrolling: touch;
        }

        .level-card { 
            background-color: #3e5c6a; 
            border: 2px solid #d4a35a; 
            border-radius: 12px; 
            display: flex; align-items: center; justify-content: space-between;
            padding: 20px; margin-bottom: 15px; 
            cursor: pointer; 
            transition: transform 0.1s;
        }
        .level-card:active { transform: scale(0.98); }
        
        .level-icon { font-size: 24px; margin-right: 15px; }
        .level-info { font-size: 16px; font-weight: bold; }
        .level-progress { color: #ecf0f1; font-size: 13px; opacity: 0.8; }

        /* --- TEST EKRANI --- */
        #quiz-screen { 
            display: none; 
            flex-direction: column; 
            position: fixed; 
            top: 0; left: 0; right: 0; bottom: 0; 
            background-color: #1a1a1a; 
            z-index: 9999; 
            padding: 20px;
        }
        
        .quiz-header { display: flex; justify-content: space-between; align-items: center; height: 50px; margin-bottom: 20px; }
        .close-btn { font-size: 32px; color: #e74c3c; cursor: pointer; padding: 10px; font-weight: bold; }

        .progress-container { display: flex; align-items: center; gap: 10px; margin-bottom: 30px; }
        .progress-track { flex-grow: 1; height: 8px; background-color: #333; border-radius: 4px; overflow: hidden; }
        #progress-fill { width: 0%; height: 100%; background-color: #3498db; transition: width 0.3s; }
        
        .word-to-solve { font-size: 32px; font-weight: 800; margin-bottom: 40px; color: #fff; text-align: center; }
        .options { width: 100%; display: flex; flex-direction: column; gap: 12px; }
        .option-btn { background-color: #333; border: none; color: #ecf0f1; padding: 18px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; }
        .option-btn.correct { background-color: #27ae60; color: white; }
        .option-btn.wrong { background-color: #e74c3c; color: white; }

        #result-screen { display: none; flex-direction: column; align-items: center; justify-content: center; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(26,26,26,0.98); z-index: 10000; }
        .score-circle { width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(#f1c40f 0% 0%, #333 0% 100%); margin: 20px auto; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: bold; }
        .home-btn { background-color: #f1c40f; color: #1a1a1a; border: none; padding: 15px 40px; border-radius: 30px; font-size: 18px; font-weight: bold; cursor: pointer; }
        
        #success-overlay { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 120px; height: 120px; background-color: #27ae60; border-radius: 20px; justify-content: center; align-items: center; z-index: 10001; }
        .checkmark { width: 30px; height: 60px; border-bottom: 8px solid white; border-right: 8px solid white; transform: rotate(45deg); margin-top: -10px; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="fixed-header-group">
        <header class="home-header">
            <div style="font-size:24px;">‚öôÔ∏è</div>
            <div class="app-title" id="app-header-title">C - Seviyesi</div>
            <div class="profile-pic">üë®üèª‚Äçüíº</div>
        </header>

        <div class="tabs">
            <div class="tab" onclick="switchTab('YDS', this)">YDS</div>
            <div class="tab" onclick="switchTab('H', this)">HABER</div>
            <div class="tab" onclick="switchTab('B2', this)">B2</div>
            <div class="tab" onclick="switchTab('B1', this)">B1</div>
            <div class="tab active" onclick="switchTab('C', this)">C</div>
            <div class="tab" onclick="switchTab('ADD', this)">‚ûï EKLE</div>
        </div>
    </div>

    <div class="content-area" id="content-container"></div>

    <div id="quiz-screen">
        <header class="quiz-header">
            <div class="close-btn" onclick="quitQuiz()">‚úï</div>
            <div style="font-weight:bold; color:white;">Kelime Testi</div>
            <div style="width:30px;"></div>
        </header>
        <div class="progress-container">
            <div class="progress-track"><div id="progress-fill"></div></div>
            <div style="color:#3498db; font-weight:bold; font-size:14px;" id="progress-text">1/20</div>
        </div>
        <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center;">
            <div class="word-to-solve" id="target-word">...</div>
            <div class="options" id="options-container"></div>
        </div>
        <div id="success-overlay"><div class="checkmark"></div></div>
    </div>

    <div id="result-screen">
        <div style="background-color: #3e5c6a; width: 85%; padding: 30px; border-radius: 20px; text-align: center; border: 2px solid #d4a35a;">
            <div style="font-size:24px; font-weight:bold;">Tamamlandƒ±!</div>
            <div class="score-circle" id="score-circle"><span id="final-score">0</span></div>
            <button class="home-btn" onclick="closeResultScreen()">Ana Sayfaya D√∂n</button>
        </div>
    </div>
</div>

<script>
    const fixedData = { "YDS": {}, "H": {}, "B2": {}, "B1": {}, "C": {} };
    
    // Ge√ßmi≈ü B√∂l√ºmler (C10, C11, C12 gibi b√∂l√ºmlerinizi de saklar)
    fixedData["C"][10] = [{en:"Evade", tr:"Ka√ßƒ±nmak"}, {en:"Evaluate", tr:"Deƒüerlendirmek"}]; 
    fixedData["C"][11] = [{en:"Fabricate", tr:"Uydurmak"}, {en:"Facilitate", tr:"Kolayla≈ütƒ±rmak"}];
    fixedData["C"][12] = [{en:"Frugal", tr:"Tutumlu"}, {en:"Frustrate", tr:"Hayal kƒ±rƒ±klƒ±ƒüƒ±"}];

    // C 13 - G√úNCELLENDƒ∞ (H ve I GRUBU)
    fixedData["C"][13] = [
        { "en": "Halt", "tr": "Durdurmak, kesmek" },
        { "en": "Haphazard", "tr": "Geli≈üig√ºzel, tesad√ºfi" },
        { "en": "Harass", "tr": "Taciz etmek, bezdirmek" },
        { "en": "Hasten", "tr": "Hƒ±zlandƒ±rmak, acele ettirmek" },
        { "en": "Haughty", "tr": "Kibirli, maƒürur" },
        { "en": "Hazardous", "tr": "Tehlikeli, riskli" },
        { "en": "Heir", "tr": "Varis, miras√ßƒ±" },
        { "en": "Hinder", "tr": "Engellemek, aksatmak" },
        { "en": "Hostile", "tr": "D√º≈ümanca" },
        { "en": "Humiliate", "tr": "A≈üaƒüƒ±lamak, rezil etmek" },
        { "en": "Hypothesis", "tr": "Hipotez, varsayƒ±m" },
        { "en": "Identical", "tr": "Birebir aynƒ±" },
        { "en": "Idle", "tr": "Aylak, bo≈ü, √ßalƒ±≈ümayan" },
        { "en": "Ignorant", "tr": "Cahil, bilgisiz" },
        { "en": "Illicit", "tr": "Yasa dƒ±≈üƒ±, illegal" },
        { "en": "Illusion", "tr": "Yanƒ±lsama, ill√ºzyon" },
        { "en": "Immaculate", "tr": "Lekesiz, tertemiz, hatasƒ±z" },
        { "en": "Imminent", "tr": "Eli kulaƒüƒ±nda, olmasƒ± yakƒ±n" },
        { "en": "Impartial", "tr": "Tarafsƒ±z, nesnel" },
        { "en": "Impede", "tr": "Geciktirmek, ayak baƒüƒ± olmak" }
    ];

    let vocabularyData = {};
    const DB_KEY = 'VocabApp_FixedLayout_v17'; // S√ºr√ºm v17

    function initApp() {
        const stored = localStorage.getItem(DB_KEY);
        if(stored) {
            vocabularyData = JSON.parse(stored);
            // Sadece C13 gibi yeni eklenen sabit verileri mevcut dataya entegre et
            if(!vocabularyData["C"]) vocabularyData["C"] = {};
            vocabularyData["C"][13] = fixedData["C"][13];
        } else {
            vocabularyData = JSON.parse(JSON.stringify(fixedData));
            saveToMemory();
        }
        renderList('C');
    }

    function saveToMemory() { localStorage.setItem(DB_KEY, JSON.stringify(vocabularyData)); }

    let activeCategory = 'C';
    let currentQuestions = [];
    let currentStep = 0, correctCount = 0;

    window.onload = initApp;

    function switchTab(cat, el) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        activeCategory = cat;
        document.getElementById('app-header-title').innerText = cat;
        renderList(cat);
    }

    function renderList(cat) {
        const div = document.getElementById('content-container');
        div.innerHTML = "";
        for(let i=1; i<=20; i++) {
            let count = (vocabularyData[cat] && vocabularyData[cat][i]) ? vocabularyData[cat][i].length : 0;
            div.innerHTML += `
                <div class="level-card" onclick="startQuiz(${i})" style="${count > 0 ? '' : 'opacity:0.5;'}">
                    <div><span class="level-icon">üìö</span> <span class="level-info">${i}. Seviye</span></div>
                    <div class="level-progress">${count} Kelime</div>
                </div>`;
        }
    }

    function startQuiz(lvl) {
        let words = vocabularyData[activeCategory][lvl] || [];
        if(words.length === 0) return;
        currentQuestions = words.map(w => {
            let opts = [w.tr];
            let pool = ["Hƒ±zlanmak", "Sabit", "Karma≈üƒ±k", "Farklƒ±", "Zayƒ±f", "G√º√ßl√º", "Eski"];
            // Yanlƒ±≈ü se√ßenekleri daha ger√ßek√ßi yapalƒ±m
            while(opts.length < 4) { 
                let r = pool[Math.floor(Math.random()*pool.length)]; 
                if(!opts.includes(r)) opts.push(r); 
            }
            return { en: w.en, correct: w.tr, options: opts.sort(()=>0.5-Math.random()) };
        }).sort(() => Math.random() - 0.5);
        currentStep = 0; correctCount = 0;
        document.getElementById('quiz-screen').style.display = 'flex';
        renderQuestion();
    }

    function renderQuestion() {
        if(currentStep >= currentQuestions.length) { showResult(); return; }
        let q = currentQuestions[currentStep];
        document.getElementById('target-word').innerText = q.en;
        document.getElementById('progress-text').innerText = `${currentStep+1}/${currentQuestions.length}`;
        document.getElementById('progress-fill').style.width = `${((currentStep+1)/currentQuestions.length)*100}%`;
        let html = "";
        q.options.forEach(opt => { 
            html += `<button class="option-btn" onclick="check(this, '${opt}', '${q.correct}')">${opt}</button>`; 
        });
        document.getElementById('options-container').innerHTML = html;
    }

    function check(btn, sel, cor) {
        if(sel === cor) {
            btn.classList.add('correct'); correctCount++;
            document.getElementById('success-overlay').style.display='flex';
            setTimeout(()=>{ document.getElementById('success-overlay').style.display='none'; next(); }, 600);
        } else {
            btn.classList.add('wrong');
            // Doƒüru olanƒ± g√∂ster
            const btns = document.querySelectorAll('.option-btn');
            btns.forEach(b => { if(b.innerText === cor) b.classList.add('correct'); });
            setTimeout(next, 1200);
        }
    }
    
    function next() { currentStep++; renderQuestion(); }
    
    function showResult() {
        document.getElementById('quiz-screen').style.display='none';
        document.getElementById('result-screen').style.display='flex';
        document.getElementById('final-score').innerText = `${correctCount}/${currentQuestions.length}`;
    }

    function closeResultScreen() { 
        document.getElementById('result-screen').style.display='none'; 
        renderList(activeCategory);
    }

    function quitQuiz() { document.getElementById('quiz-screen').style.display='none'; }
</script>
</body>
</html>
